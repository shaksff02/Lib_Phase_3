<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 3: Student Management System - Complete Code & Explanation</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; background: #f5f7fa; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 50px 40px; border-radius: 12px; margin-bottom: 40px; box-shadow: 0 8px 30px rgba(102, 126, 234, 0.3); text-align: center; border: 1px solid rgba(255, 255, 255, 0.2); }
        header h1 { font-size: 2.8em; margin-bottom: 15px; font-weight: 700; letter-spacing: -0.5px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); }
        header p { font-size: 1.15em; opacity: 0.95; font-weight: 300; letter-spacing: 0.5px; }
        nav { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 0; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 4px 20px rgba(102, 126, 234, 0.25); position: sticky; top: 20px; z-index: 100; overflow: hidden; }
        nav h3 { margin: 0; padding: 20px 30px; color: white; font-size: 1.2em; background: rgba(0, 0, 0, 0.1); border-bottom: 2px solid rgba(255, 255, 255, 0.2); text-transform: uppercase; letter-spacing: 1px; }
        nav ul { list-style: none; display: flex; flex-wrap: wrap; gap: 0; padding: 15px 30px; margin: 0; background: rgba(255, 255, 255, 0.98); }
        nav li { margin: 0; }
        nav a { display: inline-block; padding: 10px 18px; background: transparent; color: #667eea; text-decoration: none; border-radius: 6px; transition: all 0.3s ease; font-weight: 600; font-size: 0.95em; border: 2px solid transparent; }
        nav a:hover { background: #f0f0f0; border-color: #667eea; color: #764ba2; transform: translateY(-1px); }
        nav a:active { background: #e8e8e8; }
        nav a.active { background: #667eea; color: white; border-color: #667eea; }
        .section { background: white; padding: 30px; border-radius: 10px; margin-bottom: 30px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08); border-left: 5px solid #667eea; }
        h2 { color: #667eea; font-size: 1.8em; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid #667eea; }
        h3 { color: #764ba2; font-size: 1.3em; margin-top: 25px; margin-bottom: 15px; }
        .code-block { background: #282c34; color: #abb2bf; padding: 25px; border-radius: 8px; overflow-x: auto; margin: 15px 0; border-left: 4px solid #667eea; font-family: 'Courier New', monospace; font-size: 0.95em; line-height: 1.8; white-space: pre; tab-size: 4; box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5); }
        .keyword { color: #c678dd; }
        .string { color: #98c379; }
        .function { color: #61afef; }
        .comment { color: #5c6370; font-style: italic; }
        .number { color: #d19a66; }
        .tag { color: #e06c75; }
        .explanation { background: #e8f4f8; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #0288d1; }
        .explanation h5 { color: #0288d1; margin-top: 0; }
        .success { background: #d4edda; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #28a745; }
        .info { background: #d1ecf1; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #0c5460; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        table th { background: #667eea; color: white; padding: 12px; text-align: left; }
        table td { padding: 12px; border-bottom: 1px solid #e0e0e0; }
        .highlight { background: #fff9c4; padding: 2px 6px; border-radius: 3px; font-weight: 500; }
        footer { background: #667eea; color: white; padding: 30px; border-radius: 10px; text-align: center; margin-top: 50px; }
        .btn-print { background: #667eea; color: white; padding: 12px 25px; border: none; border-radius: 5px; cursor: pointer; font-size: 1em; font-weight: 600; margin-bottom: 20px; transition: all 0.3s; }
        .btn-print:hover { background: #764ba2; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); }
        @media print { nav, .btn-print { display: none; } body { background: white; } .section, header { box-shadow: none; } }
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const navLinks = document.querySelectorAll('nav a');
            const sections = document.querySelectorAll('.section, header');
            function updateActiveLink() {
                let current = '';
                sections.forEach(section => {
                    if (window.scrollY >= section.offsetTop - 150) {
                        current = section.getAttribute('id');
                    }
                });
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === '#' + current) {
                        link.classList.add('active');
                    }
                });
            }
            window.addEventListener('scroll', updateActiveLink);
            updateActiveLink();
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    const href = this.getAttribute('href');
                    if (href.startsWith('#')) {
                        e.preventDefault();
                        const targetId = href.substring(1);
                        const targetSection = document.getElementById(targetId);
                        if (targetSection) {
                            targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                            setTimeout(() => { updateActiveLink(); }, 500);
                        }
                    }
                });
            });
        });
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö Library Management System - Phase 3</h1>
            <p>Student Management System - Complete Code Guide for Students</p>
        </header>
        
        <nav>
            <h3>üìë Quick Navigation</h3>
            <ul>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#models">Models</a></li>
                <li><a href="#views">Views</a></li>
                <li><a href="#urls">URLs</a></li>
                <li><a href="#testing">Testing</a></li>
            </ul>
        </nav>
        
        <button class="btn-print" onclick="window.print()">üñ®Ô∏è Print this Guide</button>
        
        <div class="section" id="overview">
            <h2>üéØ Phase 3 Overview</h2>
            <h3>What You'll Learn</h3>
            <p>In Phase 3, we add student management with book borrowing:</p>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li>‚úÖ Create Student model</li>
                <li>‚úÖ Track book issues and returns</li>
                <li>‚úÖ Display student details</li>
                <li>‚úÖ Manage student records</li>
            </ul>
            
            <h3>Learning Objectives</h3>
            <table>
                <thead>
                    <tr>
                        <th>Concept</th>
                        <th>What You'll Do</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Student Model</strong></td>
                        <td>Create model with ForeignKey relationships</td>
                    </tr>
                    <tr>
                        <td><strong>Book Issue Tracking</strong></td>
                        <td>Track when students borrow books</td>
                    </tr>
                    <tr>
                        <td><strong>Return Management</strong></td>
                        <td>Record book returns</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="section" id="models">
            <h2>üìä Student Models</h2>
            
            <h3>Student Model</h3>
            <div class="code-block"><span class="keyword">class</span> <span class="tag">Student</span>(models.Model):
    GENDER_CHOICES = [
        (<span class="string">'M'</span>, <span class="string\">'Male'</span>),
        (<span class="string\">'F'</span>, <span class=\"string\">'Female'</span>),
    ]
    
    roll_number = models.CharField(max_length=<span class=\"number\">10</span>, 
                                   unique=<span class=\"keyword\">True</span>)
    name = models.CharField(max_length=<span class=\"number\">200</span>)
    email = models.EmailField(unique=<span class=\"keyword\">True</span>)
    phone = models.CharField(max_length=<span class=\"number\">10</span>)
    gender = models.CharField(max_length=<span class=\"number\">1</span>, 
                             choices=GENDER_CHOICES)
    date_of_birth = models.DateField()
    address = models.TextField()
    enrollment_date = models.DateField(auto_now_add=<span class=\"keyword\">True</span>)
    
    <span class=\"keyword\">def</span> __str__(self):
        <span class=\"keyword\">return</span> <span class=\"string\">f\"</span>{self.roll_number} - {self.name}<span class=\"string\">\"</span>
            </div>
            
            <h3>Book Issue Model</h3>
            <div class="code-block"><span class="keyword">class</span> <span class="tag">BookIssue</span>(models.Model):
    student = models.ForeignKey(Student, 
                               on_delete=models.CASCADE)
    book = models.ForeignKey(Book, 
                            on_delete=models.CASCADE)
    issue_date = models.DateField(auto_now_add=<span class="keyword">True</span>)
    return_date = models.DateField(null=<span class="keyword">True</span>, 
                                   blank=<span class="keyword">True</span>)
    due_date = models.DateField()
    is_returned = models.BooleanField(default=<span class="keyword">False</span>)
    
    <span class="keyword">def</span> is_overdue(self):
        <span class="keyword">from</span> django.utils <span class="keyword">import</span> timezone
        <span class="keyword">if</span> <span class="keyword">not</span> self.is_returned:
            <span class="keyword">return</span> timezone.now().date() > self.due_date
        <span class="keyword">return</span> <span class="keyword">False</span>
    
    <span class="keyword">def</span> __str__(self):
        <span class="keyword">return</span> <span class="string\">f\"</span>{self.student.name} - {self.book.title}<span class="string\">\"</span>
            </div>
        </div>
        
        <div class="section" id="views">
            <h2>üëÅÔ∏è Student Views</h2>
            
            <div class="code-block"><span class="keyword">def</span> <span class="function">student_list</span>(request):
    students = Student.objects.all()
    context = {<span class="string\">'students'</span>: students}
    <span class=\"keyword\">return</span> render(request, 
                      <span class=\"string\">'myapp/student_list.html'</span>, context)

<span class=\"keyword\">def</span> <span class=\"function\">issue_book</span>(request, student_id, book_id):
    <span class=\"keyword\">try</span>:
        student = Student.objects.get(pk=student_id)
        book = Book.objects.get(pk=book_id)
    <span class=\"keyword\">except</span>:
        <span class=\"keyword\">return</span> render(request, <span class=\"string\">'myapp/404.html'</span>)
    
    <span class=\"keyword\">if</span> book.quantity > <span class=\"number\">0</span>:
        <span class=\"keyword\">from</span> datetime <span class=\"keyword\">import</span> timedelta
        <span class=\"keyword\">from</span> django.utils <span class=\"keyword\">import</span> timezone
        
        due_date = timezone.now().date() + timedelta(days=<span class=\"number\">14</span>)
        
        BookIssue.objects.create(
            student=student,
            book=book,
            due_date=due_date
        )
        
        book.quantity -= <span class=\"number\">1</span>
        book.save()
        
        <span class=\"keyword\">return</span> redirect(<span class=\"string\">'myapp:student_detail'</span>, 
                            pk=student_id)
    
    <span class=\"keyword\">return</span> render(request, <span class=\"string\">'myapp/error.html'</span>, 
                      {<span class=\"string\">'message'</span>: <span class=\"string\">'Book not available'</span>})

<span class=\"keyword\">def</span> <span class=\"function\">return_book</span>(request, issue_id):
    <span class=\"keyword\">try</span>:
        issue = BookIssue.objects.get(pk=issue_id)
    <span class=\"keyword\">except</span>:
        <span class=\"keyword\">return</span> render(request, <span class=\"string\">'myapp/404.html'</span>)
    
    issue.is_returned = <span class=\"keyword\">True</span>
    <span class=\"keyword\">from</span> django.utils <span class=\"keyword\">import</span> timezone
    issue.return_date = timezone.now().date()
    issue.save()
    
    issue.book.quantity += <span class=\"number\">1</span>
    issue.book.save()
    
    <span class=\"keyword\">return</span> redirect(<span class=\"string\">'myapp:student_detail'</span>, 
                        pk=issue.student.pk)
            </div>
        </div>
        
        <div class="section" id="urls">
            <h2>üîó Phase 3 URLs</h2>
            <div class="code-block\">path(<span class=\"string\">'students/'</span>, views.student_list, 
     name=<span class=\"string\">'student_list'</span>),
path(<span class=\"string\">'students/&lt;int:pk&gt;/'</span>, 
     views.student_detail, name=<span class=\"string\">'student_detail'</span>),
path(<span class=\"string\">'issue/&lt;int:student_id&gt;/&lt;int:book_id&gt;/'</span>, 
     views.issue_book, name=<span class=\"string\">'issue_book'</span>),
path(<span class=\"string\">'return/&lt;int:issue_id&gt;/'</span>, 
     views.return_book, name=<span class=\"string\">'return_book'</span>),
            </div>
        </div>
        
        <div class="section" id="testing">
            <h2>‚úÖ Testing Phase 3</h2>
            <div class="success">
                <h5>‚úì Test Student Management</h5>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>‚òê Create students via admin</li>
                    <li>‚òê Issue books to students</li>
                    <li>‚òê Check quantity updates</li>
                    <li>‚òê Return books</li>
                    <li>‚òê Verify overdue tracking</li>
                </ul>
            </div>
        </div>
        
        <footer>
            <h3>üìö Phase 3 Complete!</h3>
            <p>Next: Phase 4 - User Authentication & Authorization</p>
        </footer>
    </div>
</body>
</html>